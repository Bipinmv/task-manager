(this["webpackJsonptask-manager"]=this["webpackJsonptask-manager"]||[]).push([[0],{48:function(e,t,a){},49:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var s=a(2),c=a.n(s),n=a(25),r=a.n(n),i=(a(48),a(49),a(24)),l=(a(50),a(68)),o=a(70),d=a(66),j=a(13),m=a(12),u=a(19),b=a(67),O=a(69),p=a(32),x=p.a.initializeApp({apiKey:"AIzaSyAzpKcj6SQbfY6o7flnKtE3V3xnqOkEo-k",authDomain:"task-manager-bf2b8.firebaseapp.com",databaseURL:"https://task-manager-bf2b8.firebaseio.com",projectId:"task-manager-bf2b8",storageBucket:"task-manager-bf2b8.appspot.com",messagingSenderId:"480984366504",appId:"1:480984366504:web:fbbc362b348194e958b19d"}).firestore(),h=p.a.auth(),g=p.a.firestore.FieldValue.serverTimestamp(),f=a(4);var v=function(e){var t=e.id,a=e.data,c=e.usersData,n=Object(s.useState)(!0),r=Object(u.a)(n,2),i=r[0],l=r[1],o=function(e){return"done"===e.toLowerCase()?"text-success":"to do"===e.toLowerCase()?"text-danger":"text-warning"},j=c.map((function(e,t){return Object(f.jsx)("option",{value:e.data.email,children:e.data.email},t)}));return Object(f.jsxs)("div",{className:"shadow w-100 h-25 mt-3 mb-4 p-3 position-relative",children:[Object(f.jsx)("h4",{children:a.name}),Object(f.jsxs)("div",{className:"d-flex justify-content-between mt-4",children:[Object(f.jsxs)("div",{className:"d-inline-flex",children:[Object(f.jsx)("span",{className:"mt-2 text-secondary",children:"Assignee:"}),Object(f.jsx)(O.a.Group,{controlId:"formGridUser",className:"ms-3 ",children:Object(f.jsx)(O.a.Control,{as:"select",value:a.assignee,onChange:function(e){x.collection("tasks").doc(t).update({assignee:e.target.value})},children:j})})]}),Object(f.jsxs)("div",{className:"mt-2",children:[Object(f.jsx)("span",{className:"text-secondary",children:"Reporter:"}),Object(f.jsx)("span",{className:"ms-2",children:a.reporter})]}),Object(f.jsx)(O.a.Group,{controlId:"formGridState",children:Object(f.jsxs)(O.a.Control,{as:"select",defaultValue:a.status,className:o(a.status),onChange:function(e){x.collection("tasks").doc(t).update({status:e.target.value})},children:[Object(f.jsx)("option",{className:o("to do"),value:"TO DO",children:"TO DO"}),Object(f.jsx)("option",{className:o("in progress"),value:"IN PROGRESS",children:"IN PROGRESS"}),Object(f.jsx)("option",{className:o("done"),value:"DONE",children:"DONE"})]})})]}),Object(f.jsxs)("div",{className:"my-3",children:[Object(f.jsx)("span",{className:"text-secondary",children:"Comments:"}),Object(f.jsx)(O.a.Control,{type:"text",placeholder:a.comments,value:a.comments,onChange:function(e){x.collection("tasks").doc(t).update({comments:e.target.value})},onClick:function(){return l(!i)},readOnly:i,title:"click here to add comment"})]}),Object(f.jsx)(d.a,{variant:"danger",className:"del-btn py-0 px-1",size:"sm",title:"Remove",onClick:function(e){x.collection("tasks").doc(t).delete()},children:"x"})]},t)},N=function(){var e=Object(s.useState)({input:"",inputErr:""}),t=Object(u.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)([]),r=Object(u.a)(n,2),i=r[0],l=r[1],o=Object(s.useState)([]),j=Object(u.a)(o,2),p=j[0],h=j[1];Object(s.useEffect)((function(){x.collection("tasks").orderBy("timestamp","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return{id:e.id,data:e.data()}}));l(t)})),x.collection("users").onSnapshot((function(e){var t=e.docs.map((function(e){return{data:e.data()}}));h(t)}))}),[]);return Object(f.jsxs)(b.a,{children:[Object(f.jsxs)(O.a,{className:"mt-5",children:[Object(f.jsxs)(O.a.Row,{children:[Object(f.jsx)(O.a.Control,{type:"text",placeholder:"Type here to add",value:a.input,onChange:function(e){c(Object(m.a)(Object(m.a)({},a),{},{input:e.target.value}))},"aria-describedby":"taskHelpBlock",required:!0}),Object(f.jsx)(O.a.Text,{id:"taskHelpBlock",className:"text-danger ms-3",children:a.inputErr})]}),Object(f.jsx)("div",{className:"d-flex justify-content-center",children:Object(f.jsx)(d.a,{type:"submit",onClick:function(e){e.preventDefault(),""===a.input||null===a.input?c(Object(m.a)(Object(m.a)({},a),{},{inputErr:"Please enter a task"})):(c(Object(m.a)(Object(m.a)({},a),{},{input:"",inputErr:""})),x.collection("tasks").add({name:a.input,assignee:localStorage.getItem("email"),reporter:localStorage.getItem("email"),status:"TO DO",comments:"",user_id:localStorage.getItem("uid"),timestamp:g}))},size:"md",variant:"primary",className:"text-light mt-3 mb-5",children:"Create Task"})})]}),i.map((function(e){return Object(f.jsx)(v,{data:e.data,id:e.id,usersData:p},e.id)}))]})};var k=function(){var e=Object(s.useState)({user:"",email:"",passowrd:""}),t=Object(u.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)({emailErr:"",passwordErr:""}),r=Object(u.a)(n,2),i=r[0],l=r[1],o=Object(s.useState)(!1),p=Object(u.a)(o,2),g=p[0],v=p[1],N=Object(j.f)(),k=function(e,t){"email"===t?c(Object(m.a)(Object(m.a)({},a),{},{email:e.target.value})):"password"===t&&c(Object(m.a)(Object(m.a)({},a),{},{password:e.target.value}))};return Object(f.jsx)(b.a,{className:"login-container",children:Object(f.jsxs)("div",{className:"shadow mt-5 p-4 rounded",children:[Object(f.jsx)("h3",{className:"text-center mb-4",children:"Login or Sign up"}),Object(f.jsxs)(O.a,{children:[Object(f.jsxs)(O.a.Group,{controlId:"formPlaintextEmail",children:[Object(f.jsx)(O.a.Label,{column:!0,children:"Email"}),Object(f.jsx)(O.a.Control,{type:"email",placeholder:"Email",value:a.email,onChange:function(e){return k(e,"email")},"aria-describedby":"email"})]}),Object(f.jsx)(O.a.Text,{id:"email",className:"text-danger ms-3",children:i.emailErr}),Object(f.jsxs)(O.a.Group,{controlId:"formPlaintextPassword",children:[Object(f.jsx)(O.a.Label,{column:!0,children:"Password"}),Object(f.jsx)(O.a.Control,{type:"password",placeholder:"Password",value:a.password,onChange:function(e){return k(e,"password")},"aria-describedby":"password"})]}),Object(f.jsx)(O.a.Text,{id:"password",className:"text-danger ms-3",children:i.passwordErr}),Object(f.jsx)("div",{className:"d-flex justify-content-center flex-column",children:g?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(d.a,{onClick:function(){null===a.email||""===a.email?l(Object(m.a)(Object(m.a)({},i),{},{emailErr:"Please enter email"})):null===a.password||""===a.password?l(Object(m.a)(Object(m.a)({},i),{},{emailErr:"Please enter password"})):h.createUserWithEmailAndPassword(a.email,a.password).then((function(e){return x.collection("users").doc(e.user.uid).set({email:a.email})})).then((function(){localStorage.setItem("uid",h.currentUser.uid),localStorage.setItem("email",h.currentUser.email),N.go(0)})).catch((function(e){l(Object(m.a)(Object(m.a)({},i),{},{emailErr:e.message}))}))},size:"md",variant:"primary",className:"text-light my-3",children:"SIGN UP"}),Object(f.jsxs)("p",{className:"text-center",children:["Already have an account ? ",Object(f.jsx)("span",{className:"text-primary cursor-pointer ms-2",onClick:function(){return v(!g)},children:"Login"})]})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(d.a,{onClick:function(e){e.preventDefault(),null===a.email||""===a.email?l(Object(m.a)(Object(m.a)({},i),{},{emailErr:"Please enter email"})):null===a.password||""===a.password?l(Object(m.a)(Object(m.a)({},i),{},{emailErr:"Please enter password"})):h.signInWithEmailAndPassword(a.email,a.password).then((function(e){localStorage.setItem("uid",e.user.uid),localStorage.setItem("email",e.user.email),N.go(0)})).catch((function(e){l(Object(m.a)(Object(m.a)({},i),{},{emailErr:e.message}))}))},type:"submit",size:"md",variant:"primary",className:"text-light my-3",children:"LOG IN"}),Object(f.jsxs)("p",{className:"text-center",children:["Don't have an account ? ",Object(f.jsx)("span",{className:"text-primary cursor-pointer ms-2",onClick:function(){return v(!g)},children:"Sign up"})]})]})})]})]})})},w=function(){var e=localStorage.getItem("uid"),t=localStorage.getItem("email"),a=Object(j.f)();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(l.a,{collapseOnSelect:!0,expand:"lg",variant:"light",sticky:"top",className:"bg-light",children:[Object(f.jsx)(l.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(f.jsx)(l.a.Brand,{children:Object(f.jsx)(o.a.Link,{as:i.b,to:"/",children:Object(f.jsx)("strong",{className:"brand",children:"Task Manager"})})}),Object(f.jsx)(l.a.Collapse,{id:"basic-navbar-nav",children:Object(f.jsx)(o.a,{className:"ms-auto me-lg-4",children:e&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:"text-dark me-3 mt-1",children:t}),Object(f.jsx)(d.a,{className:"",variant:"dark",size:"sm",onClick:function(){console.log("from nav",e),h.signOut().then((function(){localStorage.clear(),a.go(0)})).catch((function(e){console.log({error:e})}))},children:"Log out"})]})})})]}),Object(f.jsxs)(j.c,{children:[Object(f.jsx)(j.a,{path:"/",exact:!0,children:e?Object(f.jsx)(N,{}):Object(f.jsx)(k,{})}),Object(f.jsx)(j.a,{path:"/login",exact:!0,children:e?Object(f.jsx)(N,{}):Object(f.jsx)(k,{})})]})]})};var S=function(){return Object(f.jsx)(i.a,{basename:"/task-manager",children:Object(f.jsx)(w,{})})},y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,71)).then((function(t){var a=t.getCLS,s=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),s(e),c(e),n(e),r(e)}))};r.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(S,{})}),document.getElementById("root")),y()}},[[64,1,2]]]);
//# sourceMappingURL=main.e65618e2.chunk.js.map